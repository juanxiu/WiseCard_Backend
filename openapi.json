{
  "openapi": "3.0.1",
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Generated server url"
    }
  ],
  "paths": {
    "/api/simple-stores/search": {
      "post": {
        "tags": [
          "offline-store-controller"
        ],
        "operationId": "searchStoresWithCards",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StoreSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/StoreSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/expenses/push-notification": {
      "post": {
        "tags": [
          "expense-controller"
        ],
        "operationId": "saveExpenseFromPushNotification",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PushNotificationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Expense"
                }
              }
            }
          }
        }
      }
    },
    "/api/cards/unregister/{userId}/{cardId}": {
      "post": {
        "tags": [
          "card-controller"
        ],
        "operationId": "unregisterCardFromUser",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "cardId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/cards/register": {
      "post": {
        "tags": [
          "card-controller"
        ],
        "operationId": "registerCardToUser",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCardRegistrationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/CardWithBenefitResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/online-stores/{storeName}/cards": {
      "get": {
        "tags": [
          "online-store-controller"
        ],
        "operationId": "getStoreCards",
        "parameters": [
          {
            "name": "storeName",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/MatchingCardsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/online-stores/search": {
      "get": {
        "tags": [
          "online-store-controller"
        ],
        "operationId": "searchOnlineStores",
        "parameters": [
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/OnlineStoreSearchResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/cards": {
      "get": {
        "tags": [
          "card-controller"
        ],
        "operationId": "getCards",
        "parameters": [
          {
            "name": "cardBank",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cardType",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cardName",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CardWithBenefitResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/cards/user/{userId}": {
      "get": {
        "tags": [
          "card-controller"
        ],
        "operationId": "getCardsByUserId",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "cardBank",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cardType",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cardName",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CardWithBenefitResponse"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/benefits/matching": {
      "get": {
        "tags": [
          "benefit-controller"
        ],
        "operationId": "getMatchingCards",
        "parameters": [
          {
            "name": "storeName",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/MatchingCardsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "StoreSearchRequest": {
        "type": "object",
        "properties": {
          "lat": {
            "type": "number",
            "format": "double"
          },
          "lng": {
            "type": "number",
            "format": "double"
          },
          "cat": {
            "type": "string"
          }
        }
      },
      "BenefitInfoDTO": {
        "type": "object",
        "properties": {
          "benefitId": {
            "type": "integer",
            "format": "int64"
          },
          "benefitType": {
            "type": "string"
          },
          "rate": {
            "type": "number",
            "format": "double"
          },
          "amount": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "CardBenefitDTO": {
        "type": "object",
        "properties": {
          "cardId": {
            "type": "integer",
            "format": "int64"
          },
          "cardName": {
            "type": "string"
          },
          "benefits": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/BenefitInfoDTO"
            }
          }
        }
      },
      "StoreInfoDTO": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "placeName": {
            "type": "string"
          },
          "availableCards": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CardBenefitDTO"
            }
          }
        }
      },
      "StoreSearchResponse": {
        "type": "object",
        "properties": {
          "stores": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/StoreInfoDTO"
            }
          }
        }
      },
      "PushNotificationRequest": {
        "type": "object",
        "properties": {
          "packageName": {
            "type": "string"
          },
          "postedAt": {
            "type": "integer",
            "format": "int64"
          },
          "text": {
            "type": "string"
          },
          "title": {
            "type": "string"
          }
        }
      },
      "Expense": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64"
          },
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "place": {
            "type": "string"
          },
          "amount": {
            "type": "integer",
            "format": "int64"
          },
          "postedAt": {
            "type": "string",
            "format": "date-time"
          },
          "originalText": {
            "type": "string"
          }
        }
      },
      "UserCardRegistrationRequest": {
        "type": "object",
        "properties": {
          "userId": {
            "type": "integer",
            "format": "int64"
          },
          "cardId": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "BenefitDetailDTO": {
        "type": "object",
        "properties": {
          "discounts": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DiscountBenefitDTO"
            }
          },
          "points": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PointBenefitDTO"
            }
          },
          "cashbacks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CashbackBenefitDTO"
            }
          },
          "applicableCategory": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "applicableTargets": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "CardWithBenefitResponse": {
        "type": "object",
        "properties": {
          "cardId": {
            "type": "integer",
            "format": "int64"
          },
          "cardName": {
            "type": "string"
          },
          "cardBank": {
            "type": "string"
          },
          "imgUrl": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "benefits": {
            "$ref": "#/components/schemas/BenefitDetailDTO"
          }
        }
      },
      "CashbackBenefitDTO": {
        "type": "object",
        "properties": {
          "rate": {
            "type": "number",
            "format": "double"
          },
          "amount": {
            "type": "number",
            "format": "double"
          },
          "minimumAmount": {
            "type": "integer",
            "format": "int64"
          },
          "benefitLimit": {
            "type": "integer",
            "format": "int64"
          },
          "channel": {
            "type": "string",
            "enum": [
              "ONLINE",
              "OFFLINE",
              "BOTH"
            ]
          }
        }
      },
      "DiscountBenefitDTO": {
        "type": "object",
        "properties": {
          "rate": {
            "type": "number",
            "format": "double"
          },
          "amount": {
            "type": "number",
            "format": "double"
          },
          "minimumAmount": {
            "type": "number",
            "format": "double"
          },
          "benefitLimit": {
            "type": "number",
            "format": "double"
          },
          "channel": {
            "type": "string",
            "enum": [
              "ONLINE",
              "OFFLINE",
              "BOTH"
            ]
          }
        }
      },
      "PointBenefitDTO": {
        "type": "object",
        "properties": {
          "rate": {
            "type": "number",
            "format": "double"
          },
          "minimumAmount": {
            "type": "integer",
            "format": "int64"
          },
          "benefitLimit": {
            "type": "integer",
            "format": "int64"
          },
          "channel": {
            "type": "string",
            "enum": [
              "ONLINE",
              "OFFLINE",
              "BOTH"
            ]
          }
        }
      },
      "AvailableCardResponse": {
        "type": "object",
        "properties": {
          "cardId": {
            "type": "integer",
            "format": "int64"
          },
          "cardName": {
            "type": "string"
          },
          "cardBank": {
            "type": "string"
          },
          "imgUrl": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "benefits": {
            "$ref": "#/components/schemas/BenefitDetailDTO"
          },
          "performance": {
            "$ref": "#/components/schemas/PerformanceInfo"
          },
          "limits": {
            "$ref": "#/components/schemas/LimitInfo"
          }
        }
      },
      "LimitInfo": {
        "type": "object",
        "properties": {
          "usedDiscountAmount": {
            "type": "integer",
            "format": "int64"
          },
          "totalDiscountLimit": {
            "type": "integer",
            "format": "int64"
          },
          "usedPointAmount": {
            "type": "integer",
            "format": "int64"
          },
          "totalPointLimit": {
            "type": "integer",
            "format": "int64"
          },
          "usedCashbackAmount": {
            "type": "integer",
            "format": "int64"
          },
          "totalCashbackLimit": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "MatchingCardsResponse": {
        "type": "object",
        "properties": {
          "availableCards": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AvailableCardResponse"
            }
          }
        }
      },
      "PerformanceInfo": {
        "type": "object",
        "properties": {
          "currentAmount": {
            "type": "integer",
            "format": "int64"
          },
          "targetAmount": {
            "type": "integer",
            "format": "int64"
          },
          "isAchieved": {
            "type": "boolean"
          }
        }
      },
      "OnlineStoreInfoDTO": {
        "type": "object",
        "properties": {
          "storeId": {
            "type": "string"
          },
          "storeName": {
            "type": "string"
          },
          "availableCards": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CardBenefitDTO"
            }
          }
        }
      },
      "OnlineStoreSearchResponse": {
        "type": "object",
        "properties": {
          "stores": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OnlineStoreInfoDTO"
            }
          }
        }
      }
    }
  }
}